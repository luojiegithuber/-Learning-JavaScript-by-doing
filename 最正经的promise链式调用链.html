
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>async/await</title>

</head>
<body>


</body>
<script>

//业务流程
//1.从数据库取一个数字
//2.将这个数字+100
//3.将得到的结果*2
//4.最后将上个结果-1

//每个函数返回一个promise


function step1(n1) {
    console.log("访问完数据库得到第一步骤的数字："+n1)
    return new Promise(resolve => {
        setTimeout(() => resolve(n1 + 100), 1000);
    });
}

function step2(n2) {
    console.log("第二步骤得到的数字："+n2)
    return new Promise(resolve => {
        setTimeout(() => resolve(n2*2), 1000);
    });
}

function step3(n3) {
    console.log("第三步骤得到的数字："+n3)
    return new Promise(resolve => {
        setTimeout(() => resolve(n3-1), 1000);
    });
}


function handleNumber(n) {
    
    //访问数据库，得到的n

    step1(n)
        .then(n2 => step2(n2))
        .then(n3 => step3(n3))
        .then(result => {
            console.log(`结果是： ${result}`);
        });
}



handleNumber(100);



</script>
</html>